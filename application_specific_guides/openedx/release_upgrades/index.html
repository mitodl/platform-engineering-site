<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Release Upgrades - Platform Engineering Documentation</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../../css/brands.min.css" rel="stylesheet">
        <link href="../../../css/solid.min.css" rel="stylesheet">
        <link href="../../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Platform Engineering Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Getting Started</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../getting_started/emergency-break-glass/" class="dropdown-item">Emergency Oncall Break Glass Procedure</a>
</li>
                                    
<li>
    <a href="../../../getting_started/developer_eks_access/" class="dropdown-item">Developer EKS Access</a>
</li>
                                    
<li>
    <a href="../../../getting_started/vault_access_for_developers/" class="dropdown-item">Vault Access for Developers</a>
</li>
                                    
<li>
    <a href="../../../getting_started/update_this_site/" class="dropdown-item">Updating This Site</a>
</li>
                                    
<li>
    <a href="../../../getting_started/pe-product-infra-map/" class="dropdown-item">Applications & Services</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Platform Services</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Secrets Management (Vault)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../platform_services/secrets_management/restore_vault_backups/" class="dropdown-item">Restoring Vault Backups</a>
</li>
            
<li>
    <a href="../../../platform_services/secrets_management/faking_it_with_consul_and_vault/" class="dropdown-item">Faking It with Consul and Vault</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Service Discovery (Consul)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../platform_services/service_discovery/consul_incantations/" class="dropdown-item">Consul Incantations</a>
</li>
            
<li>
    <a href="../../../platform_services/service_discovery/fargate_service_discovery/" class="dropdown-item">Fargate Service Discovery</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Container Orchestration (Kubernetes)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../platform_services/container_orchestration/deploying_apps_with_kubernetes/" class="dropdown-item">Deploying Apps with Kubernetes</a>
</li>
            
<li>
    <a href="../../../platform_services/container_orchestration/kubernetes_cookbook/" class="dropdown-item">Kubernetes Cookbook</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">CI/CD (Concourse)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../platform_services/ci_cd/getting_started_with_concourse/" class="dropdown-item">Getting Started with Concourse</a>
</li>
            
<li>
    <a href="../../../platform_services/ci_cd/deploying_concourse/" class="dropdown-item">Deploying Concourse</a>
</li>
            
<li>
    <a href="../../../platform_services/ci_cd/concourse_github_issues_user_guide/" class="dropdown-item">Concourse GitHub Issues User Guide</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Cloud Infrastructure (AWS & Pulumi)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/pulumi_aws_classic_5_to_6_upgrade/" class="dropdown-item">Pulumi AWS Classic 5 to 6 Upgrade</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/import_existing_resources_with_pulumi/" class="dropdown-item">Importing Existing Resources with Pulumi</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/test_and_deploy_pulumi_packer_projects/" class="dropdown-item">Testing and Deploying Pulumi Packer Projects</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/tagging_amis_with_installed_software_metadata/" class="dropdown-item">Tagging AMIs with Software Metadata</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/moira_certificates/" class="dropdown-item">Moira Certificates</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/recaptcha/" class="dropdown-item">Recaptcha</a>
</li>
            
<li>
    <a href="../../../platform_services/cloud_infrastructure/publishing_to_npm/" class="dropdown-item">Publishing to NPM</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Application Specific Guides</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Open edX</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../prove_build_was_deployed/" class="dropdown-item">Proving Build Was Deployed</a>
</li>
            
<li>
    <a href="../access_django_manage/" class="dropdown-item">Accessing Django Manage</a>
</li>
            
<li>
    <a href="../enable_rapid_response_edxapp/" class="dropdown-item">Enabling Rapid Response edXApp</a>
</li>
            
<li>
    <a href="../mysql_access/" class="dropdown-item">MySQL Access</a>
</li>
            
<li>
    <a href="../retirement_pipeline/" class="dropdown-item">Retirement Pipeline</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Release Upgrades</a>
</li>
            
<li>
    <a href="../retire_an_openedx_user/" class="dropdown-item">Retiring a User</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Heroku (Legacy)</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../heroku_legacy/config_vars/" class="dropdown-item">Config Vars</a>
</li>
            
<li>
    <a href="../../heroku_legacy/dynosaur_management/" class="dropdown-item">Dynosaur Management</a>
</li>
            
<li>
    <a href="../../heroku_legacy/log_drains/" class="dropdown-item">Log Drains</a>
</li>
            
<li>
    <a href="../../heroku_legacy/transition_postgres_db_to_rds/" class="dropdown-item">Transitioning Postgres DB to RDS</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">OCW Studio</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../ocw-studio/Update_OCW_Studio_Pipeline/" class="dropdown-item">Updating The OCW Studio Pipeline</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Monitoring & Observability</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../monitoring_observability/overview/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../../../monitoring_observability/inventory/" class="dropdown-item">Inventory</a>
</li>
                                    
<li>
    <a href="../../../monitoring_observability/key_labels/" class="dropdown-item">Key Labels</a>
</li>
                                    
<li>
    <a href="../../../monitoring_observability/bump_sentry_credit/" class="dropdown-item">Bumping Sentry Credit</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Runbooks & Post-Mortems</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../runbooks_post_mortems/oncall_runbook/" class="dropdown-item">On-Call Runbook</a>
</li>
                                    
<li>
    <a href="../../../runbooks_post_mortems/20231030_xpro_outage/" class="dropdown-item">20231030 xPro Outage Post-Mortem</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Cookbooks & Patterns</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../cookbooks_patterns/devops_patterns_cookbook/" class="dropdown-item">DevOps Patterns Cookbook</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Partner Documentation</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../sso_onboarding/sso_config/" class="dropdown-item">Integrating With MIT Learn SSO</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../retirement_pipeline/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../retire_an_openedx_user/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                              <button id="theme-menu" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme" class="nav-link dropdown-toggle">
                                <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                <span class="d-lg-none ms-2">Toggle theme</span>
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="true">
                                    <i class="fa-solid fa-sun fa-fw"></i>
                                    <span class="ms-2">Light</span>
                                    <i class="fa-solid fa-check ms-auto"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                                    <i class="fa-solid fa-moon fa-fw"></i>
                                    <span class="ms-2">Dark</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                                <li>
                                  <button class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto" aria-pressed="false">
                                    <i class="fa-solid fa-circle-half-stroke fa-fw"></i>
                                    <span class="ms-2">Auto</span>
                                    <i class="fa-solid fa-check ms-auto d-none"></i>
                                  </button>
                                </li>
                              </ul>
                            </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#how-to-update-the-release-version-of-an-open-edx-deployment" class="nav-link">How To Update The Release Version Of An Open edX Deployment</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#open-edx-releases" class="nav-link">Open edX Releases</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#open-learnings-open-edx-deployments" class="nav-link">Open Learning's Open edX Deployments</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#versioning-of-build-and-deploy" class="nav-link">Versioning of Build and Deploy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#managing-supported-releases" class="nav-link">Managing Supported Releases</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#performing-an-upgrade" class="nav-link">Performing An Upgrade</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#updating-an-mitol-openedx-branch-with-the-latest" class="nav-link">Updating An MITOL OpenEdX Branch With The Latest</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#troubleshooting" class="nav-link">Troubleshooting</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="how-to-update-the-release-version-of-an-open-edx-deployment">How To Update The Release Version Of An Open edX Deployment</h1>
<h2 id="open-edx-releases">Open edX Releases</h2>
<p>Open edX cuts new named releases <a href="https://openedx.atlassian.net/wiki/spaces/COMM/pages/3613392957/Open+edX+release+schedule">approximately every 6
months</a>. Each
of our deployments needs to be able to independently upgrade the respective version on
their own schedule. MITx Residential upgrades twice per year, roughly aligned with the
release timing of the upstream Open edX platform, whereas xPro has typically upgraded on
an annual basis in the December timeframe.</p>
<p>Our MITx Online deployment of Open edX is a special case in that it deploys directly
from the master branches of the different applications and has a weekly release
schedule.</p>
<h2 id="open-learnings-open-edx-deployments">Open Learning's Open edX Deployments</h2>
<p>At Open Learning we have four distinct installations of Open edX, each with their own
release cadence and configuration requirements. For each of those deployments we have
multiple environment stages (e.g. CI, QA, Production). Each of those deployment * stages
combinations needs to be able to have their versions managed independently, with newer
versions being progressively promoted to higher environments.</p>
<p>This is further complicated by the long testing cycles for new releases in a given
deployment. We need to be able to deploy a newer release to a lower environment stage,
while maintaining the ability to deploy patches of the current release in a given time
period to subsequent environments. For example, as we start testing the Palm release for
the MITx Residential deployment we need to get it installed in the CI
environment. Meanwhile, we may have a bug-fix or security patch that needs to be tested
in the QA environment and propagated to Production.</p>
<p>In addition to the cartesian product of (versions * deployments * env stages) we also
have to manage these values across the different components of the Open edX
ecosystem. For example, the core of the platform is called edx-platform, which in turn
relies on:
- a forum service
- the edx-notes API service
- a codejail REST API service
- and myriad MFEs (Micro-FrontEnds).</p>
<p>For any of these different components we may need to be able to override the repository
and/or branch that we are building/deploying from.</p>
<h2 id="versioning-of-build-and-deploy">Versioning of Build and Deploy</h2>
<p>In order to support this sea of complexity we have a module of <code>bridge.settings.openedx</code>
that has a combination of data structures and helper functions to control what
applications and versions get deployed where and when. These values are then used in the
build stages of the different components, as well as driving the deployment pipelines in
Concourse that are responsible for orchestrating all of this.</p>
<h2 id="managing-supported-releases">Managing Supported Releases</h2>
<p>We only want to support the build and deployment of a minimal subset of Open edX
releases. This is controlled by the Enum <code>OpenEdxSupportedRelease</code> in the
<code>bridge.settings.openedx.types</code> module. When there is a new release created it needs to
be added to this Enum.  For example, to add support for the Palm release a new line is
added of the format <code>palm = ("palm", "open-release/palm.master")</code></p>
<p>When we have upgraded all deployments past a given release we remove it from that Enum
so that we no longer need to worry about maintaining configuration/code/etc. for that
release.</p>
<h2 id="performing-an-upgrade">Performing An Upgrade</h2>
<p>There are two data structures that control the applications and versions that get
included in a given deployment and which version to use in the respective environment
stage. The <code>OpenLearningOpenEdxDeployment</code> Enum is the top level that sets the release
name for the environment stage of a given deployment.</p>
<p>There are situations where we need to customize a component that is being deployed. In
those cases we typically create a fork of the upstream repository where we manage the
patches that we require. The <code>ReleaseMap</code> dictionary is used to manage any overrides of
repository and branch for a given component of the platform, as well as which components
are included in that deployment. The <code>OpenEdxApplicationVersion</code> structure will map to
the default repositories and branches for a given component, but supplies a
<code>branch_override</code> and <code>origin_override</code> parameter to manage these customizations.</p>
<p>For example, to upgrade our MITx Residential deployments to start testing the Palm
release we change the <code>CI</code> stages of the <code>mitx</code> and <code>mitx-staging</code> deployments to use
the <code>palm</code> value for the <code>OpenEdxSupportedRelease</code></p>
<pre><code class="language-diff">@@ -13,7 +13,7 @@ class OpenLearningOpenEdxDeployment(Enum):
     mitx = DeploymentEnvRelease(
         deployment_name=&quot;mitx&quot;,
         env_release_map=[
-            EnvRelease(&quot;CI&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
+            EnvRelease(&quot;CI&quot;, OpenEdxSupportedRelease[&quot;palm&quot;]),
             EnvRelease(&quot;QA&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
             EnvRelease(&quot;Production&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
         ],
@@ -21,7 +21,7 @@ class OpenLearningOpenEdxDeployment(Enum):
     mitx_staging = DeploymentEnvRelease(
         deployment_name=&quot;mitx-staging&quot;,
         env_release_map=[
-            EnvRelease(&quot;CI&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
+            EnvRelease(&quot;CI&quot;, OpenEdxSupportedRelease[&quot;palm&quot;]),
             EnvRelease(&quot;QA&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
             EnvRelease(&quot;Production&quot;, OpenEdxSupportedRelease[&quot;olive&quot;]),
         ],
</code></pre>
<p>Because Palm is a new release for these deployments we also need to add a <code>palm</code> key to
the <code>ReleaseMap</code> dictionary that contains the applications that are associated with
those deployments and the appropriate <code>OpenEdxApplicationVersion</code> records for that
deployment.</p>
<pre><code class="language-diff">@@ -61,6 +61,122 @@ ReleaseMap: dict[
     OpenEdxSupportedRelease,
     dict[OpenEdxDeploymentName, list[OpenEdxApplicationVersion]],
 ] = {
+    &quot;palm&quot;: {
+        &quot;mitx&quot;: [
+            OpenEdxApplicationVersion(
+                application=&quot;edx-platform&quot;,  # type: ignore
+                application_type=&quot;IDA&quot;,
+                release=&quot;palm&quot;,
+                branch_override=&quot;mitx/palm&quot;,
+                origin_override=&quot;https://github.com/mitodl/edx-platform&quot;,
+            ),
             ...
+        ],
+        &quot;mitx-staging&quot;: [
+            OpenEdxApplicationVersion(
+                application=&quot;edx-platform&quot;,  # type: ignore
+                application_type=&quot;IDA&quot;,
+                release=&quot;palm&quot;,
+                branch_override=&quot;mitx/palm&quot;,
+                origin_override=&quot;https://github.com/mitodl/edx-platform&quot;,
+            ),
             ...
+        ],
+    },
     &quot;olive&quot;: {
         &quot;mitx&quot;: [
             OpenEdxApplicationVersion(
</code></pre>
<p>All of the <a href="https://github.com/mitodl/ol-infrastructure/blob/main/src/ol_concourse/pipelines/open_edx/">deployment
pipelines</a>
for these application components are managed by a corresponding <code>meta</code> pipeline that
will automatically update the build and pipeline configuration based on the changed
version information as soon as it is merged into the <code>master</code> branch of
<code>ol-infrastructure</code>.</p>
<p><strong>Note - TMM 2023-04-14</strong></p>
<ul>
<li>The current configuration of our meta pipelines means that before the updates to the
  <code>bridge.settings.openedx.version_matrix</code> module can be picked up by the <code>meta</code>
  pipelines the <code>ol-infrastructure</code> docker image needs to be built and pushed to our
  registry so that it can be loaded. This means that once the <a href="https://cicd.odl.mit.edu/teams/main/pipelines/ol-infrastructure-docker-container">ol-infrastructure image
  pipeline</a>
  completes it might be necessary to manually trigger the meta pipelines again.</li>
<li>Once a new release is deployed to a given environment stage for the first time it may
  be necessary to manually ensure that all database migrations are run properly. It will
  be attempted automatically on deployment, but there are often conflicts between the
  existing database state and the migration logic that require intervention.</li>
</ul>
<h2 id="updating-an-mitol-openedx-branch-with-the-latest">Updating An MITOL OpenEdX Branch With The Latest</h2>
<p>This involves updating our edx-platform fork and rebasing the correct branch.</p>
<p>For instance, to update our forked OpenEdX Sumac branch for MITxOnline, you
would:</p>
<ul>
<li>Check out our fork of the edx-platform repo - <code>gh repo clone
mitodl/edx-platform</code></li>
<li>Change to the right branch - <code>git checkout mitx/sumac</code></li>
<li>Update all the things - <code>git fetch --all</code></li>
<li>Rebase from upstream - <code>git pull --rebase upstream open-release/sumac.master</code></li>
<li>Check the results, and if correct push the branch - <code>git push origin
mitx/sumac --force</code></li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="openedx-redwood">OpenEdX Redwood</h3>
<p>With each new OpenEdX release, inevitably there will be problems. For instance,
in the Redwood release, we noticed that login for MITX CI was failing with a 500
response code.</p>
<p>So we ran the following Grafana query using the query builder:</p>
<pre><code>{environment=&quot;mitx-ci&quot;, application=&quot;edxapp&quot;} |= `` | json | line_format `{{.message}}
</code></pre>
<p>That yielded a problem with JWT signing keys as the exception cited a signing
failure.</p>
<p>So we had to log onto an EC2 instance appropriate to MITX CI and run the
following command from the lms container shell:</p>
<pre><code>manage.py generate_jwt_signing_key
</code></pre>
<p>That produced public and private signing key JSON blobs, which we could then add
to SOPS and then through the pipeline into Vault where they'll be picked up as
Redwood deploys to the various apps and environments.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js"></script>
        <script src="../../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
